<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mozzi: Hardware</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mozzi-circle.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mozzi
   &#160;<span id="projectnumber">version v2.0</span>
   </div>
   <div id="projectbrief">sound synthesis library for Arduino</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__hardware.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Hardware</div>  </div>
</div><!--header-->
<div class="contents">


<h3><a id="hardware_avr"></a>Mozzi on classic Arduino, Teensy 2.x, Arduino Mega, and other 8 bit &quot;AVR&quot;/ATMEGA architecture boards</h3><div class="textblock"><h1><a class="anchor" id="avr_status"></a>
Port status and notes</h1>
<p>This is the original "port" of Mozzi, and thus very elaborate. The main challenges on this platform, compared to other MCUs, are limitations in flash, RAM, and CPU power.</p>
<h1><a class="anchor" id="avr_output"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_PWM</li>
<li>MOZZI_OUTPUT_2PIN_PWM</li>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
</ul>
<p>In all modes, except MOZZI_OUTPUT_EXTERNAL_CUSTOM, Timer 1 is claimed, and is not available for any other purpose. This means, among other things, that pins 9 and 10 cannot be used for analogWrite(), while pins 3 and 11 should still be available <em>except</em> in MOZZI_OUTPUT_2PIN_PWM mode (as Timer2 is also claimed, then; for definite info on which pin is connected to which timer, check a suitable reference, as your board may differ). See <em>Mozzi&gt;examples&gt;11.Communication&gt;Sinewave_PWM_pins_HIFI</em>. for an example of emulating analogWrite() on any digital pin, without the need for a hardware timer.</p>
<h1><a class="anchor" id="avr_pwm"></a>
MOZZI_OUTPUT_PWM</h1>
<p>For MOZZI_OUTPUT_PWM, output is restricted to pins that are hardware-attached to Timer 1, but can be configured within this tight limit. In particular, the default setup on the Arduino UNO is:</p><ul>
<li>Mono: Pin 9 -&gt; configurable using MOZZI_AUDIO_PIN_1</li>
<li>Stereo: Pin 9 (left) and Pin 10 (right) -&gt; configurable using MOZZI_AUDIO_PIN_1 and MOZZI_AUDIO_PIN_2 For pinouts on other boards, refer to config/known_16bit_timers.</li>
</ul>
<p>Rate of the PWM output can be controlled separately from MOZZI_AUDIO_RATE: MOZZI_PWM_RATE.</p>
<p>The available sample resolution is 488, i.e. almost 9 bits, providing some headroom above the 8 bit table resolution currently used by the oscillators. You can look at the TimerOne library for more info about how interrupt rate and pwm resolution relate.</p>
<h1><a class="anchor" id="avr_2pin_pwm"></a>
MOZZI_OUTPUT_2PIN_PWM</h1>
<p>In this mode, output is split across two pins (again, both connected to Timer 1), with each outputting 7 bits for a total of 14. This allows for much better dynamic range, providing much more definition than can be achieved using <a class="el" href="group__hardware.html#avr_pwm">MOZZI_OUTPUT_PWM</a> , while using only modestly more processing power. Further, it allows for a much higher PWM carrier rate can be much higher (125 kHz by default; see <a class="el" href="group__config.html#ga3a6d77e502b179f2e490f6151e93414e">MOZZI_PWM_RATE</a>), which is well beyond the audible range.</p>
<p>On the downside, this mode requires an extra hardware timer (Timer2 in addition to Timer1), which may increase compatibility problems with other Arduino libraries that also require a timer. Further, a more elaborate hardware setup is needed, making it less convenient for rapid prototyping. For circuit details, see <a href="https://sensorium.github.io/Mozzi/learn/output/">https://sensorium.github.io/Mozzi/learn/output/</a> .</p>
<p>On the classic Arduino Uno, the default pinout in this mode is:</p><ul>
<li>Pin 9 (high bits) and Pin 10 (low bits) -&gt; configurable using MOZZI_AUDIO_PIN_1 and MOZZI_AUDIO_PIN_1_LOW</li>
</ul>
<p>Here is table of the default pins on some other boards. Rows with an x on it have actually been tested (and importantly, the outcome recoreded; input welcome on further boards.)</p>
<p>resistor.....3.9k......499k <br  />
x................9..........10...............Arduino Uno <br  />
x................9..........10...............Arduino Duemilanove <br  />
x................9..........10...............Arduino Nano <br  />
x................9..........10...............Arduino Leonardo <br  />
x................9..........10...............Ardweeny <br  />
x................9..........10...............Boarduino <br  />
x...............11.........12...............Freetronics EtherMega <br  />
.................11.........12...............Arduino Mega <br  />
.................14.........15...............Teensy <br  />
.............B5(14)...B6(15)...........Teensy2 <br  />
x...........B5(25)...B6(26)...........Teensy2++ <br  />
.................13.........12...............Sanguino <br  />
 For pinouts on other AVR boards, config/known_16bit_timers might contain some hints.</p>
<p>Rate of the PWM output can be controlled separately from <a class="el" href="group__config.html#gabc7b46bc3dbe1078f411287572226eff">MOZZI_AUDIO_RATE</a>, and is much higher (125kHz), by default: <a class="el" href="group__config.html#ga3a6d77e502b179f2e490f6151e93414e">MOZZI_PWM_RATE</a>.</p>
<p>The default sample resolution is 7 bits per pin, for a total of 14 bits. This can be configured within hardware limits (<a class="el" href="group__config.html#ga3a6d77e502b179f2e490f6151e93414e">MOZZI_PWM_RATE</a>) using <a class="el" href="group__config.html#ga9bfd84013cbc04ddb51b31f583178720">MOZZI_AUDIO_BITS_PER_CHANNEL</a>, but beware that increasing this will require even more accuracy in our output resistors (see the linked documentation, above).</p>
<h1><a class="anchor" id="avr_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>See <a class="el" href="group__audio__output.html">External audio output</a> </p>
</div>

<h3><a id="hardware_esp32"></a>Mozzi on ESP32-based boards.</h3><div class="textblock">port by Dieter Vandoren and Thomas Friedrichsmeier<h1><a class="anchor" id="esp32_status"></a>
Port status and notes</h1>
<ul>
<li>Since flash memory is not built into the ESP32, but connected, externally, it is much too slow for keeping wave tables, audio samples, etc. Instead, these are kept in RAM on this platform.</li>
<li>Asynchronous analog reads are not implemented. <code><a class="el" href="group__analog.html#gadedb573129313bad0c183af2486c5283" title="See mozziAnalogRead().">mozziAnalogRead()</a></code> relays to <code>analogRead()</code>. <a class="el" href="group__config.html#ga40857197e27e3b4d3ee7177e95f59d6d">MOZZI_AUDIO_INPUT</a> is not implemented</li>
<li>twi_nonblock is not ported</li>
<li>WIFI-activity not yet tested, but likely the same notes as for ESP8266 apply, i.e. <em>any</em> Wifi activity is likely to introdcue considerable nose. Consider turning off WIFI.</li>
<li>The implementation of <a class="el" href="group__core.html#ga55fa9d48f327b646c2f71cef7da7b8f0" title="An alternative for Arduino time functions like micros() and millis().">audioTicks()</a> may be slightly inaccurate on this platform.</li>
</ul>
<h1><a class="anchor" id="esp32_output"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
<li>MOZZI_OUTPUT_PDM_VIA_I2S</li>
<li>MOZZI_OUTPUT_I2S_DAC</li>
<li>MOZZI_OUTPUT_INTERNAL_DAC</li>
</ul>
<p>The default mode is <a class="el" href="group__hardware.html#esp32_internal_dac">MOZZI_OUTPUT_INTERNAL_DAC</a> .</p>
<h1><a class="anchor" id="esp32_internal_dac"></a>
MOZZI_OUTPUT_INTERNAL_DAC</h1>
<p>The internal DAC has 8 bit resolution, and outputs to GPIO pins 25 and 26 (non-configurable). For simplicity of code, both pins are always used. In a mono configuration, both pins output the same sample.</p>
<p>TODO: We could really use this to hack in a 2 PIN mode!</p>
<dl class="section note"><dt>Note</dt><dd>The number 25 refers to "GPIO 25" or sometimes labelled "D25". Confusingly, many boards come with an additional, totally different numbering scheme on top of that. Check a detailed pinout diagram, if in any doubt.</dd></dl>
<p>Internally, the inbuilt DAC is connected via an I2S interface. Which interface number to use can be configured using:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_I2S_PORT     ... </span><span class="comment">// (default: I2S_NUM_0)</span></div>
</div><!-- fragment --><h1><a class="anchor" id="esp32_i2s_dac"></a>
MOZZI_OUTPUT_I2S_DAC</h1>
<p>This mode outputs to a PT8211 (or compatible) I2S DAC, which allows for very high quality (mono or stereo) output. Communication needs the BCK, WS, and DATA(out) pins of one I2S interface. Presumably, any pins qualify, and you can configure this using: </p><div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_I2S_PIN_BCK  ... </span><span class="comment">// (default: 26)</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_I2S_PIN_WS   ... </span><span class="comment">// (default: 15)</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_I2S_PIN_DATA ... </span><span class="comment">// (default: 33)</span></div>
<div class="line">#define MOZZI_I2S_PORT     ... <span class="comment">// (default: I2S_NUM_0)</span></div>
</div><!-- fragment --><p>See the note above (esp_internal_dac) regarding pin numbering. Also, please always test the default pinout, should a custom setting fail!</p>
<p>As a technical note, I2S support in the ESP32 SDK has been reworked since this was implemented in Mozzi, and Mozzi uses the "legacy" implementation "i2s.h". This should not be an issue, unless you want to connect additional I2S components, yourself. In which case contributions are certainly welcome!</p>
<h1><a class="anchor" id="esp32_pdm_via_i2s"></a>
MOZZI_OUTPUT_PDM_VIA_I2S</h1>
<p>This mode uses the same setup as <a class="el" href="group__hardware.html#esp32_i2s_dac">MOZZI_OUTPUT_I2S_DAC</a>, but rather than using an external DAC, the communication signal itself is modulated in PDM (pulse density modulation) encoded form. Thus not extra hardware is needed, and the signal is output on the DATA pin (see above). The BCK and WS pins are also claimed, but should be left non-connected, and do not produce anything meaningful. This can only be used in mono mode.</p>
<p>Output resolution may be adjusted by defining MOZZI_PDM_RESOLUTION , where the default value of 4 means that each audio sample is encoded into four 32 bit blocks of ones and zeros. Obviously, more is potentially better, but at the cost of considerable computation power.</p>
<h1><a class="anchor" id="esp32_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>See <a class="el" href="group__audio__output.html">External audio output</a> </p>
</div>

<h3><a id="hardware_esp8266"></a>Mozzi on ESP32-based boards.</h3><div class="textblock">port by Thomas Friedrichsmeier<h1><a class="anchor" id="esp8266_status"></a>
Port status and notes</h1>
<ul>
<li>Since flash memory is not built into the ESP8266, but connected, externally, it is much too slow for keeping wave tables, audio samples, etc. Instead, these are kept in RAM on this platform.</li>
<li>Asynchronous analog reads are not implemented. <code><a class="el" href="group__analog.html#gadedb573129313bad0c183af2486c5283" title="See mozziAnalogRead().">mozziAnalogRead()</a></code> relays to <code>analogRead()</code>. <a class="el" href="group__config.html#ga40857197e27e3b4d3ee7177e95f59d6d">MOZZI_AUDIO_INPUT</a> is not available</li>
<li>twi_nonblock is not ported</li>
<li>Note that the ESP8266 pins can output less current than the other supported CPUs. The maximum is 12mA, with a recommendation to stay below 6mA.<ul>
<li>WHEN CONNECTING A HEADPHONE, DIRECTLY, USE APPROPRIATE CURRENT LIMITING RESISTORS (&gt;= 500Ohms).</li>
</ul>
</li>
<li><em>Any</em> WiFi-activity can cause severe spikes in power consumption. This can cause audible "ticking" artifacts, long before any other symptoms.<ul>
<li>If you do not require WiFi in your sketch, you should turn it off, <em>explicitly</em>, using<div class="fragment"><div class="line">WiFi.mode(WIFI_OFF) </div>
</div><!-- fragment -->.</li>
</ul>
</li>
<li>A juicy enough, well regulated power supply, and a stabilizing capacitor between VCC and Gnd can help a lot.</li>
<li>As the (PDM) output signal is digital, a single (fast!) transistor can be used to amplify it to an independent voltage level.</li>
<li><a class="el" href="group__core.html#ga2fca37b988ab369e2f3c3108c683e59d" title="This is required in Arduino&#39;s loop().">audioHook()</a> calls <code>yield()</code> once for every audio sample generated. Thus, as long as your audio output buffer does not run empty, you should not need any additional <code>yield()</code>s inside <code>loop()</code>.</li>
</ul>
<h1><a class="anchor" id="esp8266_output"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
<li>MOZZI_OUTPUT_PDM_VIA_I2S</li>
<li>MOZZI_OUTPUT_PDM_VIA_SERIAL</li>
<li>MOZZI_OUTPUT_I2S_DAC</li>
</ul>
<p>The default mode is <a class="el" href="group__hardware.html#esp8266_pdm_via_serial">MOZZI_OUTPUT_PDM_VIA_SERIAL</a> .</p>
<dl class="section note"><dt>Note</dt><dd>This port really does not currently come with a PWM mode!</dd></dl>
<h1><a class="anchor" id="esp8266_pdm_via_serial"></a>
MOZZI_OUTPUT_PDM_VIA_SERIAL</h1>
<p>Output is coded using pulse density modulation, and sent via GPIO2 (Serial1 TX).</p><ul>
<li>This output mode uses timer1 for queuing audio sample, so that timer is not available for other uses.</li>
<li>Note that this mode has slightly lower effective analog output range than esp8266_pdm_via_i2s, due to start/stop bits being added to the output stream.</li>
<li>Supports mono output, only, pins not configurable.</li>
</ul>
<p>The option MOZZI_PDM_RESOLTUON (default value 2, corresponding to 64 ones and zeros per audio sample) can be used to adjust the output resolution. Obviously higher values demand more computation power.</p>
<h1><a class="anchor" id="esp8266_pdm_via_serial"></a>
MOZZI_OUTPUT_PDM_VIA_SERIAL</h1>
<p>Output is coded using pulse density modulation, and sent via the I2S pins. The I2S data out pin (GPIO3, which is also "RX") will have the output, but <em>all</em> I2S output pins (RX, GPIO2 and GPIO15) will be affected. Mozzi tries to set GPIO2 and GPIO15 to input mode, and <em>at the time of this writing</em>, this allows I2S output on RX even on boards such as the ESP01 (where GPIO15 is tied to Ground). However, it seems safest to assume that this mode may not be useable on boards where GPIO2 or GPIO15 are not available as output pins.</p>
<p>Supports mono output, only, pins not configurable.</p>
<p>Resolution may be controlled using MOZZI_PDM_RESOLUTION (see above; default value is 2).</p>
<h1><a class="anchor" id="esp8266_i2s_dac"></a>
MOZZI_OUTPUT_I2S_DAC</h1>
<p>Output is sent to an external DAC (such as a PT8211), digitally coded. This is the only mode that supports stereo (<a class="el" href="group__config.html#ga6ffeecfb574900db4d3161ce0992b8bb">MOZZI_AUDIO_CHANNELS</a>). It also needs the least processing power. The pins cannot be configured (GPIO3/RX, GPIO2, and GPIO15).</p>
<h1><a class="anchor" id="esp8266_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>See <a class="el" href="group__audio__output.html">External audio output</a> </p>
</div>

<h3><a id="hardware_aa_index"></a>This section contains hardware specific notes, and availabe configuration options for the various platforms.</h3><div class="textblock">Mozzi works on many different platforms, but not the same output modes are available on all hardware.For boards specific notes and configuration options, see the relevant sub-pages in this section:<ul>
<li><a class="el" href="group__hardware.html">Mozzi on classic Arduino, Teensy 2.x, Arduino Mega, and other 8 bit "AVR"/ATMEGA architecture boards</a></li>
<li><a class="el" href="group__hardware.html">Mozzi on ESP32-based boards.</a></li>
<li><a class="el" href="group__hardware.html">Mozzi on ESP32-based boards.</a></li>
<li>hardware_espmbed</li>
<li><a class="el" href="group__hardware.html">Mozzi on Arduino Uno R4 - Renesas.</a></li>
<li><a class="el" href="group__hardware.html">Mozzi on RP2040 (Raspberry Pi Pico)</a></li>
<li>hardware_samd21</li>
<li><a class="el" href="group__hardware.html">Mozzi on STM32duino-based boards.</a></li>
<li>hardware_stm32maple</li>
<li>hardware_teensy </li>
</ul>
</div>

<h3><a id="hardware_mbed"></a>Mozzi on MBED-based boards (Arduino Giga / Portenta).</h3><div class="textblock">port by Thomas Friedrichsmeier &amp; Thomas Combriat<h1><a class="anchor" id="mbed_status"></a>
Port status and notes</h1>
<p>Compiles and runs using Arduino's standard and Arduino_AdvancedAnalog libraries. This port is still <b>experimental</b>, testing reveals some instabilities for some configurations (in particular with <a class="el" href="group__config.html#ga40857197e27e3b4d3ee7177e95f59d6d">MOZZI_AUDIO_INPUT</a>) that are under active investigations.</p>
<p>This port is not complete yet, in particular:</p><ul>
<li>Asynchroneous analog reads are not implemented (yet), <code><a class="el" href="group__analog.html#gadedb573129313bad0c183af2486c5283" title="See mozziAnalogRead().">mozziAnalogRead()</a></code> relays to <code>analogRead()</code>. (Note that <a class="el" href="group__config.html#ga40857197e27e3b4d3ee7177e95f59d6d">MOZZI_AUDIO_INPUT</a> <em>is</em> implemented!)</li>
<li>This port should support other MBED based Arduino boards like the Arduino Portenta, in <em>theory</em>, but the developer have only tested it on the Giga. Feedback welcome!</li>
</ul>
<h1><a class="anchor" id="mbed_output"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
<li>MOZZI_OUTPUT_PDM_VIA_SERIAL</li>
<li>MOZZI_OUTPUT_INTERNAL_DAC</li>
</ul>
<p>The default mode is <a class="el" href="group__hardware.html#mbed_internal_dac">MOZZI_OUTPUT_INTERNAL_DAC</a> .</p>
<h1><a class="anchor" id="mbed_internal_dac"></a>
MOZZI_OUTPUT_INTERNAL_DAC</h1>
<p>This uses the inbuild DAC on the board. The default is setting is appropriate for the Arduino Giga: 12 bits going to A13 (3.5mm jack connector's tip), and in stereo mode to pin A12 (3.5mm jack connector's first ring) additionally.</p>
<p>For other boards is may be appropriate to customize: </p><div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_1   ...   </span><span class="comment">// mono / left channel; default: A13</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_2   ...   </span><span class="comment">// stereo only: right channel; default: A12</span></div>
<div class="line">#define MOZZI_AUDIO_BITS    ...   <span class="comment">// default is 12</span></div>
</div><!-- fragment --><h1><a class="anchor" id="mbed_pdm_via_serial"></a>
MOZZI_PDM_VIA_SERIAL</h1>
<p>Returns a pulse-density modulated (mono only) signal on one of the hardware UARTs of the board (Serial ports). Default is using the SERIAL2, on pin D18. You can confiugre the pins to use, but it must be connected to a hardware UART. Output is written to the TX pin, only, but the RX pin needs to be claimed as well. Beware of confusing pinout labelling, for instance SERIAL2_TX iss labelled "TX1" on the Arduino Giga. The audio resolution can be enhanced using MOZZI_PDM_RESOLUTION, which is described in more detail here: @esp32_pdm_via_i2s .</p>
<p>Configuration options: </p><div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_SERIAL_PIN_TX ...    </span><span class="comment">// default: SERIAL2_TX</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_SERIAL_PIN_RX ...    </span><span class="comment">// *must* specify the matching one, if customizing the above; default: SERIAL2_RX</span></div>
<div class="line">#define MOZZI_PDM_RESOLUTION ...   <span class="comment">// default value is 2, for 2*32 ones and zeros per audio sample</span></div>
</div><!-- fragment --><h1><a class="anchor" id="mbed_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>See <a class="el" href="group__audio__output.html">External audio output</a> </p>
</div>

<h3><a id="hardware_renesas"></a>Mozzi on Arduino Uno R4 - Renesas.</h3><div class="textblock">port by Thomas Combriat<h1><a class="anchor" id="renesas_status"></a>
Port status and notes</h1>
<p>Compiles and runs using Arduino's standard library (Renesas 0.8.7 at the time of this writing).</p>
<p>A few particularities:</p><ul>
<li>Because this board has an on-board DAC (A0), but only one, STEREO is not implemented and Mozzi uses this pin. Usage of other pins using PWM for instance is not implemented yet.</li>
<li><a class="el" href="group__analog.html#gacd5e655ae9057843ade0d7647f909663" title="See getAudioInput().">getAudioInput()</a> and <a class="el" href="group__analog.html#gadedb573129313bad0c183af2486c5283" title="See mozziAnalogRead().">mozziAnalogRead()</a> return values in the Renesas' full ADC resolution of 0-16384 rather than AVR's 0-1023. <em>This might change in the near future for speed purposes.</em></li>
</ul>
<h1><a class="anchor" id="rensesas_output"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
<li>MOZZI_OUTPUT_INTERNAL_DAC</li>
</ul>
<p>The default mode is <a class="el" href="group__hardware.html#renesas_internal_dac">MOZZI_OUTPUT_INTERNAL_DAC</a>. Further modes may be added in the future.</p>
<h1><a class="anchor" id="renesas_internal_dac"></a>
MOZZI_OUTPUT_INTERNAL_DAC</h1>
<p>This uses the inbuild DAC on the board on pin A0. Mono output only, and the pin is not configurable. Audio resolution is also fixed at 12 bits (which is what the board supports).</p>
<p>This mode claims two timers (but it is not hardcoded, which ones).</p>
<h1><a class="anchor" id="renesas_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>MOZZI_OUTPUT_EXTERNAL_TIMED claimes one timer, MOZZI_OUTPUT_EXTERNAL_CUSTOM does not claim any timer. See <a class="el" href="group__audio__output.html">External audio output</a> </p>
</div>

<h3><a id="hardware_rp2040"></a>Mozzi on RP2040 (Raspberry Pi Pico)</h3><div class="textblock">port by Thomas Friedrichsmeier<h1><a class="anchor" id="rp2040_status"></a>
Port status and notes</h1>
<p>Compiles and runs using <a href="https://github.com/earlephilhower/arduino-pico">this core</a>. Can probably be ported to the Mbed core for RP2040, relatively easily, as it relies mostly on the RP2040 SDK API. Tested on a Pi Pico.</p>
<ul>
<li>This is a recent addition, implementation details may still change (currently just PWM driven by a timer; this may be worth changing to a DMA driven output)</li>
<li>Wavetables and samples are not kept in progmem on this platform. While apparently speed (of the external flash) is not much of an issue, the data always seems to be copied into RAM, anyway.</li>
<li>Note that <a class="el" href="group__analog.html#gacd5e655ae9057843ade0d7647f909663" title="See getAudioInput().">getAudioInput()</a> and <a class="el" href="group__analog.html#gadedb573129313bad0c183af2486c5283" title="See mozziAnalogRead().">mozziAnalogRead()</a> return values in the RP2040's full ADC resolution of 0-4095 rather than AVR's 0-1023.</li>
<li>twi_nonblock is not ported</li>
<li>Code uses only one CPU core</li>
</ul>
<h1><a class="anchor" id="rp2040_output"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
<li>MOZZI_OUTPUT_PWM</li>
<li>MOZZI_OUTPUT_I2S_DAC</li>
</ul>
<p>The default mode is rp2040_pwm .</p>
<h1><a class="anchor" id="rp2040_pdm"></a>
MOZZI_OUTPUT_PWM</h1>
<p>Audio output is written to pin 0 (mono) or 0 and 1 (stereo), by default, with 11 bits of ouput resolution. One hardware timer interrupt and one DMA channel are claimed (number not hardcoded), a non-exclusive handler is installed on DMA_IRQ_0.</p>
<p>Configuration options: </p><div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_1   ...  </span><span class="comment">// default is 0</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_BITS    ...  </span><span class="comment">// output resolution (bits); default is 11</span></div>
<div class="line"><span class="comment">// additionally, for stereo:</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_2   ...  </span><span class="comment">// default is 1; this must be on the same PWM slice as the first pin (i.e. neighboring)</span></div>
</div><!-- fragment --><h1><a class="anchor" id="rp2040_i2s_dac"></a>
MOZZI_OUTPUT_I2S_DAC</h1>
<p>Output to an external DAC, connected via I2S. This uses 16 bit (per audio channel), but can be changed to 8, 16, 24 (left aligned) and 32 resolution. Both plain I2S and LSBJ format (PT8211 needs this, for instance) are available. Plain format is used by default. The GPIO pins to use can be configured,</p><ul>
<li>almost - freely (see below). Two DMA channels are claimed (numbers not hardcoded), non-exclusive handlers are installed on DMA_IRQ_0.</li>
</ul>
<p>Configuration options: </p><div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_AUDIO_BITS    ...  </span><span class="comment">// available values are 8, 16 (default), 24 (LEFT ALIGN in 32 bits type!!) and 32 bits</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_I2S_PIN_BCK                        ... </span><span class="comment">// /BLCK) default is 20</span></div>
<div class="line"><span class="comment">//#define MOZZI_I2S_PIN_WS (MOZZI_I2S_PIN_BCK+1) ... // CANNOT BE CHANGED, HAS TO BE NEXT TO pBCLK, i.e. default is 21</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_I2S_PIN_DATA                       ... </span><span class="comment">// (DOUT) default is 22</span></div>
<div class="line">#define MOZZI_I2S_FORMAT                         ... <span class="comment">// may be MOZZI_I2S_FORMAT_LSBJ or MOZZI_I2S_FORMAT_PLAIN (default)</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The MOZZI_I2S_FORMAT_LSBJ option may require a relatively recent git-hub checkout of the arduino-pico core.</dd></dl>
<h1><a class="anchor" id="rp2040_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>See <a class="el" href="group__audio__output.html">External audio output</a> </p>
</div>

<h3><a id="hardware_samd"></a>Mozzi on SAMD21 based boards (Arduino Circuitplayground M0 and others)</h3><div class="textblock">port by Adrian Freed<h1><a class="anchor" id="samd_status"></a>
Port status and notes</h1>
<ul>
<li></li>
</ul>
</div>

<h3><a id="hardware_stm32_disambiguation"></a>Mozzi on STM32-based boards - disambiguation</h3><div class="textblock"><ul>
<li>The situation on STM32-based boards is rather confusing, as there are several competing Arduino cores. Importantly:<ul>
<li>Some boards use dedicated cores (e.g. Arduino Giga / Portenta <a class="el" href="group__hardware.html">Mozzi on MBED-based boards (Arduino Giga / Portenta).</a>) etc. For those, see the relevant sections (if we support them).</li>
<li>There is a series of libmaple-based cores, including <a href="https://github.com/rogerclarkmelbourne/Arduino_STM32">Roger Clark's libmaple-based core</a>. These are highly optimized, and provide very complete support, but only for a limited number of boards. Unfortunately, at the time of this writing (2023/04), they are not available for installation via the Arduino Board Manager, and they do not currently seem actively maintained. For using these with Mozzi, see <a class="el" href="group__hardware.html">Mozzi on STM32duino-based boards.</a></li>
<li>A generic Arduino core for STM32 is the <a href="https://github.com/stm32duino/Arduino_Core_STM32">STM32duino core</a>. It supports a huge set of boards, and seems to have offical backing by STM, but some features of the libmaple based cores are still lacking. To complete confusion, this core now uses the label "STM32duino", which used to be what the libmaple cores above were known by (don't blame Mozzi for this mess!). For using this with Mozzi, see <a class="el" href="group__hardware.html">Mozzi on STM32duino-based boards.</a> </li>
</ul>
</li>
</ul>
</div>

<h3><a id="hardware_stm32duino"></a>Mozzi on STM32duino-based boards.</h3><div class="textblock">port by Thomas Friedrichsmeier<dl class="section note"><dt>Note</dt><dd>Be sure to understand the info given at hardwware_stm32_disambiguation . This page is about using Mozzi with the STM32duino core.</dd></dl>
<h1><a class="anchor" id="stm32duino_status"></a>
Port status and usage notes</h1>
<p>Tested on a STM32F103C8T6 blue pill board as well as an STM32F411CE black pill board, i.e. on sboards <em>without</em> a real DAC. Compiles and runs, with a bunch of caveats (see below). Should probably run on any other board supported by the <a href="https://github.com/stm32duino/Arduino_Core_STM32">STM32duino core</a> (although this theory is untested). When trying any other board, you probably want to check the platform specific settings (see below), carefully, importantly, whether the desired output resolution is achievable, and whether the desired output pins are PWM capable.</p>
<ul>
<li><a class="el" href="group__config.html#gac4c9e989df7beb3034cc26e571a41569">MOZZI_ANALOG_READ</a> input implementation is somewhat experimental, and may not be able to service a whole lot of pins (contributions welcome)</li>
<li><a class="el" href="group__config.html#ga40857197e27e3b4d3ee7177e95f59d6d">MOZZI_AUDIO_INPUT</a> is completely untested (but implemented in theory; feedback welcome!)</li>
<li><a class="el" href="group__analog.html#gacd5e655ae9057843ade0d7647f909663" title="See getAudioInput().">getAudioInput()</a> and <a class="el" href="group__analog.html#gadedb573129313bad0c183af2486c5283" title="See mozziAnalogRead().">mozziAnalogRead()</a> return values in the STM32's full ADC resolution (the exact range depending on the board in use) rather than AVR's 0-1023.</li>
<li>twi_nonblock is not ported</li>
</ul>
<h1><a class="anchor" id="stm32duino_output_modes"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
<li>MOZZI_OUTPUT_PWM</li>
<li>MOZZI_OUTPUT_PWM_2PIN</li>
</ul>
<p>The default mode is <a class="el" href="group__hardware.html#stm32duino_pwm">MOZZI_OUTPUT_PWM</a> .</p>
<dl class="section note"><dt>Note</dt><dd>This port may look similar to, but uses a different default GPIO pinout than @hardware_stm32_maple !</dd></dl>
<h1><a class="anchor" id="stm32duino_pwm"></a>
MOZZI_OUTPUT_PWM</h1>
<p>Standard pulse width modulated output to one (mono) or two (stereo, see <a class="el" href="group__config.html#ga6ffeecfb574900db4d3161ce0992b8bb">MOZZI_AUDIO_CHANNELS</a>) GPIO pins. Default pinout: PA8 (mono/left), PA9 (right channel in stereo). This mode uses two hardware timers: One for the PWM (Timer 3 when using the default pin configuration), and a second for updating the output at audio rate. The default audio resolution is 10 bits, which results in a carrier frequency of ~70kHz on a 72MHz CPU. On slower boards you will have to descrease this. The following settings may be costumized, if desired:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_1       ...  </span><span class="comment">// Left / mono output pin. Default: PA8</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_UPDATE_TIMER ... </span><span class="comment">// Second hardware timer to claim, must not be the same of the timer for the above pin. Default TIM2</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_BITS        ...  </span><span class="comment">// Output resolution in bits. Default is 10</span></div>
<div class="line"><span class="comment">// For stereo, only:</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_2       ...  </span><span class="comment">// Right channel output pin. This *must* be connected to the same hardware timer as MOZZI_AUDIO_PIN_1 ! Default: PA9</span></div>
</div><!-- fragment --><h1><a class="anchor" id="stm32duino_pwm"></a>
MOZZI_OUTPUT_PWM</h1>
<p>This mode is very similar to <a class="el" href="group__hardware.html#stm32duino_pwm">MOZZI_OUTPUT_PWM</a>, but splitting output for a single channel across two GPIO pins for better resolution. For details on the required hardware setup, and configuration tradeoffs, see <a class="el" href="group__hardware.html#avr_2pin_pwm">MOZZI_OUTPUT_2PIN_PWM</a> . Stereo output is not available in this mode. Output is at 2*7 bits at up to 560kHz carrier frequency (but limited to 5 times audio rate).</p>
<p>Customizable configuration options: </p><div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_1       ...  </span><span class="comment">// High byte of the output. Default: PA8</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_1_LOW   ...  </span><span class="comment">// Low byte of the output. Default: PA9</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_UPDATE_TIMER ... </span><span class="comment">// Second hardware timer to claim. Default TIM2</span></div>
<div class="line">#define MOZZI_AUDIO_BITS_PER_CHANNEL  ...  <span class="comment">// Bits per pin. Default is 7</span></div>
</div><!-- fragment --><h1><a class="anchor" id="stm32duino_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>See <a class="el" href="group__audio__output.html">External audio output</a> . The (single) hardware timer claimed for MOZZI_OUTPUT_EXTERNAL_TIMED may be configured using "MOZZI_AUDIO_UPDATE_TIMER" (default: TIM2). </p>
</div>

<h3><a id="hardware_stm32_maple"></a>Mozzi on STM32duino-based boards.</h3><div class="textblock">port by Thomas Friedrichsmeier<dl class="section note"><dt>Note</dt><dd>Be sure to understand the info given at hardwware_stm32_disambiguation . This page is about using Mozzi with the STM32 "libmaple based" core.</dd>
<dd>
This port may look similar to, but uses a different default GPIO pinout than @hardware_stm32duino !</dd></dl>
<h1><a class="anchor" id="stm32_maple_status"></a>
Status and peculiarities of this port</h1>
<p>Compiles for and runs on a STM32F103C8T6 blue pill board, with a bunch of caveats (see below), i.e. on a board <em>without</em> a real DAC. Should probably run on any other board supported by <a href="https://github.com/rogerclarkmelbourne/Ardu0ino_STM32">Roger Clark's libmaple-based core</a> (although this theory is untested).</p>
<dl class="section note"><dt>Note</dt><dd>that at the time of this writing, <a href="https://github.com/stevstrong/Arduino_STM32/">Stev Strong's slightliy more recent fork of this core</a> does <em>not</em> work with Mozzi, apparently due to a bug in pwmWrite().</dd></dl>
<ul>
<li>If you want to use MIDI, be sure to replace "MIDI_CREATE_DEFAULT_INSTANCE()" with "MIDI_CREATE_INSTANCE(HardwareSerial, Serial1, MIDI)" (or Serial2)</li>
<li>MOZZI_AUDIO_INPUT_STANDARD is implemented in theory, but untested (feedback welcome)</li>
<li><a class="el" href="group__analog.html#gacd5e655ae9057843ade0d7647f909663" title="See getAudioInput().">getAudioInput()</a> and <a class="el" href="group__analog.html#gadedb573129313bad0c183af2486c5283" title="See mozziAnalogRead().">mozziAnalogRead()</a> return values in the STM32's full ADC resolution of 0-4095 rather than AVR's 0-1023.</li>
</ul>
<p>twi_nonblock is not ported</p>
<h1><a class="anchor" id="stm32_output_modes"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
<li>MOZZI_OUTPUT_PWM</li>
<li>MOZZI_OUTPUT_PWM_2PIN</li>
</ul>
<p>The default mode is <a class="el" href="group__hardware.html#stm32_maple_pwm">MOZZI_OUTPUT_PWM</a> .</p>
<h1><a class="anchor" id="stm32_maple_pwm"></a>
MOZZI_OUTPUT_PWM</h1>
<p>Standard pulse width modulated output to one (mono) or two (stereo, see <a class="el" href="group__config.html#ga6ffeecfb574900db4d3161ce0992b8bb">MOZZI_AUDIO_CHANNELS</a>) GPIO pins. Default pinout: PB8 (mono/left), PB9 (right channel in stereo). This mode uses two hardware timers: One for the PWM (Timer 4 when using the default pin configuration), and a second for updating the output at audio rate. The default audio resolution is 10 bits, which results in a carrier frequency of ~70kHz on a 72MHz CPU. On slower boards you will have to descrease this. The following settings may be costumized, if desired:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_1       ...  </span><span class="comment">// Left / mono output pin. Default: PB8</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PWM_TIMER   ...  </span><span class="comment">// Must be set ot the hardware timer connected to the above pin. Default: 4</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_UPDATE_TIMER ... </span><span class="comment">// Second hardware timer to claim. Default 2</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_BITS        ...  </span><span class="comment">// Output resolution in bits. Default is 10</span></div>
<div class="line"><span class="comment">// For stereo, only:</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_2       ...  </span><span class="comment">// Right channel output pin. This *must* be connected to the same hardware timer as MOZZI_AUDIO_PIN_1 ! Default: PB9</span></div>
</div><!-- fragment --><h1><a class="anchor" id="stm32_maple_2pin_pwm"></a>
MOZZI_OUTPUT_2PIN_PWM</h1>
<p>This mode is very similar to <a class="el" href="group__hardware.html#stm32_maple_pwm">MOZZI_OUTPUT_PWM</a>, but splitting output for a single channel across two GPIO pins for better resolution. For details on the required hardware setup, and configuration tradeoffs, see <a class="el" href="group__hardware.html#avr_2pin_pwm">MOZZI_OUTPUT_2PIN_PWM</a> . Stereo output is not available in this mode. Output is at 2*7 bits at up to 560kHz carrier frequency (but limited to 5 times audio rate).</p>
<p>Customizable configuration options: </p><div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_1       ...  </span><span class="comment">// High byte of the output. Default: PB8</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_2       ...  </span><span class="comment">// Low byte of the output. Default: PB9</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PWM_TIMER   ...  </span><span class="comment">// Must be set to the number of the hardware timer connect to the above pins. Default: 4</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_UPDATE_TIMER ... </span><span class="comment">// Second hardware timer to claim. Default TIM2</span></div>
<div class="line">#define MOZZI_AUDIO_BITS_PER_CHANNEL  ...  <span class="comment">// Bits per pin. Default is 7</span></div>
</div><!-- fragment --><h1><a class="anchor" id="stm32_maple_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>See <a class="el" href="group__audio__output.html">External audio output</a> The (single) hardware timer claimed for MOZZI_OUTPUT_EXTERNAL_TIMED may be configured using "MOZZI_AUDIO_UPDATE_TIMER" (default: TIM2). </p>
</div>

<h3><a id="hardware_teensy3"></a>Mozzi on Teensy 3.0/3.1/3.2/3.4/3.5/LC boards.</h3><div class="textblock">port by Tim Barrass<dl class="section note"><dt>Note</dt><dd>For Teensy 4.x see <a class="el" href="group__hardware.html">Mozzi on Teensy 4.x boards.</a></dd></dl>
<h1><a class="anchor" id="teensy3_status"></a>
Port status and ussage notes</h1>
<p>This port requires the following two libraries (which should be part of a default installtion, however):</p><ul>
<li><a href="https://github.com/loglow/IntervalTimer">Timer library</a> for Teensy 3.* by Daniel Gilbert</li>
<li><a href="http://github.com/pedvide/ADC">ADC library</a> by Pedro Villanueva</li>
</ul>
<p>Some of the differences for Teensy 3.* which will affect users include:</p><ul>
<li>twi_nonblock code by Marije Baalman for non-blocking I2C is not compatible with Teensy 3.0/3.1/3.2.</li>
</ul>
<h1><a class="anchor" id="teensy3_output"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
<li>MOZZI_OUTPUT_INTERNAL_DAC</li>
</ul>
<p>The default mode is <a class="el" href="group__hardware.html#teensy3_internal_dac">MOZZI_OUTPUT_INTERNAL_DAC</a> .</p>
<h1><a class="anchor" id="teensy3_internal_dac"></a>
MOZZI_OUTPUT_INTERNAL_DAC</h1>
<p>Output is to the inbuilt DAC. Output resolution is 12 bits. Mono, only. The DAC output pin differs from board to boards. In most cases the appropriate pin will be set outmatically. If needed, you can specify the DAC pin, explicitly:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_1       ...  </span><span class="comment">// Default: A14, A12, or A21, depending on board</span></div>
</div><!-- fragment --><h1><a class="anchor" id="teensy3_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>See <a class="el" href="group__audio__output.html">External audio output</a> </p>
</div>

<h3><a id="hardware_teensy4"></a>Mozzi on Teensy 4.x boards.</h3><div class="textblock">port by Thomas Combriat<dl class="section note"><dt>Note</dt><dd>For Teensy 3.x see <a class="el" href="group__hardware.html">Mozzi on Teensy 3.0/3.1/3.2/3.4/3.5/LC boards.</a></dd></dl>
<h1><a class="anchor" id="teensy4_status"></a>
Port status and ussage notes</h1>
<p>This port requires the following two libraries (which should be part of a default installtion, however):</p><ul>
<li><a href="https://github.com/loglow/IntervalTimer">Timer library</a> for Teensy 4.* by Daniel Gilbert</li>
<li><a href="http://github.com/pedvide/ADC">ADC library</a> by Pedro Villanueva</li>
</ul>
<p>Contrary to the Teensy 3, the Teensy 4 do not have any DAC. The output is done on pin A8 (PWM) by default (see below). twi_nonblock is not ported.</p>
<h1><a class="anchor" id="teensy3_output"></a>
Output modes</h1>
<p>The following audio modes (see <a class="el" href="group__config.html#ga9b14b158a7a469612a89dcc9630933b7">MOZZI_AUDIO_MODE</a>) are currently supported on this hardware:</p><ul>
<li>MOZZI_OUTPUT_EXTERNAL_TIMED</li>
<li>MOZZI_OUTPUT_EXTERNAL_CUSTOM</li>
<li>MOZZI_OUTPUT_PWM</li>
</ul>
<p>The default mode is <a class="el" href="group__hardware.html#teensy4_pwm">MOZZI_OUTPUT_PWM</a> .</p>
<h1><a class="anchor" id="teensy4_pwm"></a>
MOZZI_OUTPUT_PWM</h1>
<p>Output is to a GPIO pin (or two in stereo). The output resolution is fixed at 10 bits, and a 146484 kHz carrier frequency. The output pins can be configured as:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_1       ...  </span><span class="comment">// Left / mono output pin. Default: A8</span></div>
<div class="line"><span class="comment">// For stereo, only:</span></div>
<div class="line"><span class="preprocessor">#define MOZZI_AUDIO_PIN_2       ...  </span><span class="comment">// Right channel output pin. Default: A9</span></div>
</div><!-- fragment --><h1><a class="anchor" id="teensy4_external"></a>
MOZZI_OUTPUT_EXTERNAL_TIMED and MOZZI_OUTPUT_EXTERNAL_CUSTOM</h1>
<p>See <a class="el" href="group__audio__output.html">External audio output</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Apr 12 2024 15:57:28 for Mozzi by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
